# Use a own dispatcher for setting up a external database connection and a different mapper logic.
# ------------------------------------------------------------------------------------------------
#includeLibs.tx_ptextdb_dispatcher = EXT:pt_extdb/Classes/Dispatcher.php
#tt_content.list.20.ptextdb_pi1.userFunc = tx_ptextdb_dispatcher->dispatch

plugin.tx_ptextlist.settings {

    abc = 1

	listConfig.test {
	
	    abc = 2
	
		#dataType =[extBase(default)|dataBase]
		dataType = dataBase
	
		# config für extbase 
		#data {
		#		domainObject = FeUser	
		#}
	
		# config für dosGenerator
		data {
			#backend = [typo3|mysql|oracle|mssql|soap|textfile]
			backend = mysql
			datasource {
				host = localhost
				username = typo3
				password = typo3
				database = typo3
				
				#filePath = ...
			}
			
			query {
				
				from = table1,table2
				from {
				    10 {
				    	table = table1
				    	alias = alias1
				    }
				    20 {
				    	table = table2
				    	alias = alias2
				    }
				}
				
				join = JOIN table1 AS a ON table1.id = table2.table1_id
				join {
				    [10 = INNER | LEFT | RIGHT]
				    10 {
						table = table1
						alias = a
						on {
						    field = table1.id
						    value = table2.table1_id
						}
				    }
				}
				
				where = A = 1 AND (B = 1 OR C = 1)
				where {
				    and {
						10 {
						    field = A
						    value = 1
						    [comparator = eq]
						}
						
						20 = OR
						20 {
						    10 {
								field = B
								value = 1
								[comparator = eq]
						    }
						    
						    20 {
								field = C
								value = 1
								[comparator = eq]
						    }
						
						}
				    }
				}
				
				groupBy = foo.bar
				groupBy {
				    10 {
					table = foo
					field = bar2
				    }
					
				}
				
				orderBy = foo.bar ASC
				orderBy {
				    10 {
					table = foo
					field = bar
					ordering = ASC
				    }
					
				}	
				
				limit = [5,]10
				limit {
				    value = 10
				    [offset = 5]
				}
				
				mapping {
				    property = field
				}
				
			}
				
		}
		
		mapping {
			
		}
		
		rendering {
			
		}
		
		filters {
			
		}
	
	}
}
