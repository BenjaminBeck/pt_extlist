####################################################
# This template configures a demolist for use
# with pt_extlist
#
# @author Michael Knoll <knoll@punkt.de>, Daniel Lienert <lienert@punkt.de>
# @package Typo3
# @subpackage pt_extlist
####################################################

plugin.tx_ptextlist.settings {

    listConfig.demolist {
    
    	backendConfig < plugin.tx_ptextlist.prototype.backend.typo3
        backendConfig {
            
            datasource {
                # no configuration required here
            }
            
            
            tables (
                static_countries
            )
            
            
            baseFromClause (
            	static_countries 
            	inner join static_currencies on static_countries.cn_iso_nr = static_currencies.cu_iso_nr 
            )
            
            baseWhereClause (
            	
            ) 
            
        }
        

        
        fields {
            
            name_local {
                table = static_countries
                field = cn_short_local
            }
            
            name_official {
            	table = static_countries
            	field = cn_official_name_en
            }
            
            name_english {
                table = static_countries
                field = cn_short_en
            }
            
            cu_name_english {
            	table = static_currencies
            	field = cu_name_en
            }
            
            uno_member {
				table = static_countries
				field = cn_uno_member
			}
			
			iso2 {
				table = static_countries
				field = cn_iso_2
			}
            
        }


        
        columns {
            10 {
            	isSortable = 0
            	
            	label = LLL:EXT:pt_extlist/Resources/Private/Language/locallang.xml:column_name_local
            	
                columnIdentifier = renderedCol1
                fieldIdentifier = name_local
                
                renderObj = COA
				renderObj {
					5 = IMAGE
					5.if {
						value.data = field:uno_member
						equals = 1
					}
					5.file = EXT:pt_extlist/Resources/Public/List/un.gif
					5.stdWrap.typolink.parameter = http://www.un.org
					5.stdWrap.typolink.ATagParams = class="un-link"
				
					10 = TEXT
					10.data = field:name_english
					10.append = TEXT
					10.append {
						data = field:name_local
						if {
							value.data = field:name_local
							equals.data = field:name_english
							negate = 1
						}
					}
					10.append.noTrimWrap = | (|)|
					#10.wrap3 = |&nbsp;
					
					
	 			}
            }
            
            
            20 {
            	isSortable = 1
            	sorting = cn_short_en ASC
            
            	label = COA
            	label {
            		10 = TEXT
            		10.value = bla
            	}
            
                columnIdentifier = renderedCol2
                fieldIdentifier = name_english
            }
            
            30 {
            	isSortable = 1
            	sorting = cn_official_name_en ASC
            
                columnIdentifier = official_name
                fieldIdentifier = name_official
                label = Official Name
            }
            
             40 {
            	isSortable = 1
           
                columnIdentifier = cuname_english
                fieldIdentifier = cu_name_english
                label = Currency Name
            }
            
            50 {
				label = ISO
				columnIdentifier = isoNoColumn
				fieldIdentifier = iso2
				
				renderUserFunctions {
					10 = EXT:pt_extlist/Resources/Private/UserFunctions/class.tx_ptlist_demolist_renderer.php:tx_ptlist_demolist_renderer->iso2CodeRenderer
				}
			}
        }
        
        renderer {
        	specialCell = EXT:pt_extlist/Resources/Private/UserFunctions/class.tx_ptextlist_demolist_specialcell.php:tx_ptextlist_demolist_specialCell->processCell
        }
        
        filters {
	        filterbox1 {
	              10 < plugin.tx_ptextlist.prototype.filter.string 
	              10 {
	                  filterIdentifier = filter1
	                  label = Stringfilter 1
	                  defaultValue = DefaultString
	                  fieldDescriptionIdentifier = name_english
	              }
	              
	              20 < plugin.tx_ptextlist.prototype.filter.group 
	              20 {
	                  filterIdentifier = filter2
	                  label = GroupFilter 1
	                  fieldDescriptionIdentifier = cn_currency_iso_nr
	                  displayFields = static_currencies.cu_name_en
	                  filterFields = static_currencies.cu_iso_nr
	                  multiple = 1
	                  #excludeFilters = filterbox1.filter1
	              }
	         }
        }  
    }
}

